name: Integration Tests
on:
  push:
    branches:
      - master
    paths-ignore:
      - 'navikt/**'
      - '.github/**'
  pull_request:
    types: [ assigned, opened, synchronize, reopened ]
  workflow_dispatch:

jobs:
  bruker-service:
    name: Integration Test
    uses: navikt/testnorge/.github/workflows/common.integtation-test.yml@docker-compose-testnorge
    with:
      app-name: 'bruker-service'
      working-directory: 'apps/bruker-service/'
      healthcheck: 'http://localhost:8002/internal/isAlive'
    secrets:
      NAV_TOKEN: ${{ secrets.NAV_TOKEN }}