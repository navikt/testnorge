name: Frontend lib dolly-komponenter

on:
  push:
    paths:
      - navikt/dolly-komponenter/**
      - .github/workflows/lib.frontend.dolly-komponenter.yml

jobs:
  build:
    name: Build
    permissions:
      contents: write
      packages: write
    uses: ./.github/workflows/common.js.build.yml
    with:
      working-directory: 'navikt/dolly-komponenter/'
    secrets:
      READER_TOKEN: ${{ secrets.READER_TOKEN }}
  publish:
    name: Publish
    permissions:
      contents: write
      packages: write
    uses: ./.github/workflows/common.js.publish.yml
    if: ${{ github.ref == 'refs/heads/master' || contains(github.event.head_commit.message, '#publish-libs') }}
    with:
      working-directory: 'navikt/dolly-komponenter/'
    secrets:
      READER_TOKEN: ${{ secrets.READER_TOKEN }}
