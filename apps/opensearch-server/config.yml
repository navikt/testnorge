apiVersion: aiven.io/v1alpha1
kind: OpenSearch
metadata:
  labels:
    team: dolly
  name: opensearch-dolly-sessions
  namespace: dolly
spec:
  plan: startup-4
  project: nav-dev
  userConfig:

  accessPolicy:
    inbound:
      rules:
        - application: team-dolly-lokal-app
          cluster: dev-gcp
        - application: testnorge-tp
          cluster: dev-fss
        - application: testnorge-statisk-data-forvalter
          cluster: dev-fss
        - application: testnav-hodejegeren-proxy
          cluster: dev-fss
        - application: mn-synt-arbeidsforhold-service
          cluster: dev-fss
        - application: testnav-oversikt-frontend
          cluster: dev-gcp
    outbound:
      rules:
        - application: tps-forvalteren-proxy
          cluster: dev-fss
  azure:
    application:
      allowAllUsers: true
      enabled: true
      tenant: nav.no
  ingresses:
    - "https://testnorge-hodejegeren.dev.intern.nav.no" # dev-fss
