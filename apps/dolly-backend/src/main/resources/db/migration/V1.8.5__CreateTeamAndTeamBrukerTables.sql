CREATE TABLE TEAM
(
    ID           SERIAL PRIMARY KEY,
    NAVN         VARCHAR(100) NOT NULL UNIQUE,
    BESKRIVELSE  VARCHAR(1000),
    OPPRETTET    TIMESTAMP,
    OPPRETTET_AV INT,
    CONSTRAINT OPPRETTET_AV FOREIGN KEY (OPPRETTET_AV) REFERENCES BRUKER (ID)
);

CREATE TABLE TEAM_BRUKER
(
    ID        Serial PRIMARY KEY,
    BRUKER_ID INT NOT NULL,
    TEAM_ID   INT NOT NULL,
    OPPRETTET TIMESTAMP,
    CONSTRAINT FK_TEAM_BRUKER_BRUKER FOREIGN KEY (BRUKER_ID) REFERENCES BRUKER (ID),
    CONSTRAINT FK_TEAM_BRUKER_TEAM FOREIGN KEY (TEAM_ID) REFERENCES TEAM (ID),
    CONSTRAINT UNIK_BRUKER_TEAM UNIQUE (BRUKER_ID, TEAM_ID)
);

ALTER TABLE BRUKER
    ADD COLUMN GJELDENDE_TEAM_ID INT;
ALTER TABLE BRUKER
    ADD CONSTRAINT FK_BRUKER_TEAM FOREIGN KEY (GJELDENDE_TEAM_ID) REFERENCES TEAM (ID);