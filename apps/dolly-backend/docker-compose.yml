services:

  cloud_sql_proxy:
    image: gcr.io/cloud-sql-connectors/cloud-sql-proxy:2.14.2
    network_mode: host
    command:
      - "dolly-dev-ff83:europe-north1:testnav-dolly-backend-local"
      - "--credentials-file=/application_default_credentials.json"
      - "--run-connection-test"
    volumes:
      - type: bind
        # Set a variable DOLLY_ADC_LOCATION.
        #  - $HOME/.config/gcloud/application_default_credentials.json for Linux/macOS.
        #  - $APPDATA/gcloud/application_default_credentials.json for Windows.
        source: $DOLLY_ADC_LOCATION
        target: /application_default_credentials.json

  opensearch:
    image: opensearchproject/opensearch:latest
    ports:
      - "9200:9200"
      - "9600:9600"
    environment:
      discovery.type: single-node
      plugins.security.disabled: "true"
      OPENSEARCH_INITIAL_ADMIN_PASSWORD: YLAgOm}rz#o6#Aq