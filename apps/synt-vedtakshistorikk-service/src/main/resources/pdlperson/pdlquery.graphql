fragment folkeregistermetadataDetails on Folkeregistermetadata {
    aarsak
    ajourholdstidspunkt
    gyldighetstidspunkt
    kilde
    opphoerstidspunkt
    sekvens
}

fragment metadataDetails on Metadata {
    endringer {
        kilde
        registrert
        registrertAv
        systemkilde
        type
    }
    historisk
    master
    opplysningsId
}

query($ident: ID!, $historikk: Boolean!) {
    hentIdenter(ident: $ident, historikk: true) {
        identer {
            ident,
            historisk,
            gruppe
        }
    }
    hentGeografiskTilknytning(ident: $ident) {
        gtType,
        gtLand,
        gtKommune,
        gtBydel,
        regel
    }
    hentPerson(ident: $ident) {
        forelderBarnRelasjon {
            relatertPersonsIdent,
            relatertPersonsRolle,
            minRolleForPerson,
            folkeregistermetadata {
                ...folkeregistermetadataDetails
            }
            metadata {
                ...metadataDetails
            }
        },
        folkeregisterpersonstatus(historikk: $historikk) {
            status,
            forenkletStatus,
            folkeregistermetadata {
                ...folkeregistermetadataDetails
            }
            metadata {
                ...metadataDetails
            }
        }
    }
}