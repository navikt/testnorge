fragment folkeregistermetadataDetails on Folkeregistermetadata {
    aarsak
    ajourholdstidspunkt
    gyldighetstidspunkt
    kilde
    opphoerstidspunkt
    sekvens
}

fragment metadataDetails on Metadata {
    endringer {
        kilde
        registrert
        registrertAv
        systemkilde
        type
    }
    historisk
    master
    opplysningsId
}

query($ident: ID!, $historikk: Boolean!) {
    hentIdenter(ident: $ident, historikk: true) {
        identer {
            ident,
            historisk,
            gruppe
        }
    }
    hentGeografiskTilknytning(ident: $ident) {
        gtType,
        gtLand,
        gtKommune,
        gtBydel,
        regel
    }
    hentPerson(ident: $ident) {
        foedsel {
            foedselsaar,
            foedselsdato,
            foedeland,
            foedested,
            foedekommune,
            metadata {
                ...metadataDetails
            }
        },
        doedsfall {
            doedsdato,
            metadata {
                ...metadataDetails
            }
        },
        kjoenn(historikk: $historikk) {
            kjoenn,
            folkeregistermetadata {
                ...folkeregistermetadataDetails
            }
            metadata {
                ...metadataDetails
            }
        },
        navn(historikk: $historikk) {
            fornavn,
            mellomnavn,
            etternavn,
            forkortetNavn,
            originaltNavn {
                fornavn,
                mellomnavn,
                etternavn
            },
            gyldigFraOgMed,
            folkeregistermetadata {
                ...folkeregistermetadataDetails
            }
            metadata {
                ...metadataDetails
            }
        },
    }
}