tasks.register('build') {
    dependsOn gradle.includedBuilds*.task(':build')
}

tasks.register('clean') {
    dependsOn gradle.includedBuilds*.task(':clean')
}

tasks.register('assemble') {
    dependsOn gradle.includedBuilds*.task(':assemble')
}

tasks.register('sonarqube') {
    dependsOn gradle.includedBuilds*.task(':sonarqube')
}

tasks.register('dollyValidation') {
    description = "Runs the dollyValidation task for all included application builds."
    group = "verification"
    def targetBuilds = gradle.includedBuilds.findAll { includedBuild ->
        def parentDirName = includedBuild.projectDir.parentFile.name
        parentDirName == 'apps' || parentDirName == 'proxies' // Only relevant for builds in /apps or /proxies.
    }
    dependsOn targetBuilds*.task(':dollyValidation')
}