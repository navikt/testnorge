name: ident-pool
team: registre
image: "docker.adeo.no:5000/registre/ident-pool"
replicas:
  min: 1
  max: 1
  cpuThresholdPercentage: 80
port: 8080
healthcheck:
  liveness:
    path: /internal/isAlive
    initialDelay: 30
    periodSeconds: 2
    failureThreshold: 140
  readiness:
    path: /internal/isReady
    initialDelay: 30
    periodSeconds: 2
    failureThreshold: 140
leaderElection: true
prometheus:
  enabled: true
  path: /internal/prometheus
resources:
  requests:
    cpu: 1
    memory: 1024Mi
  limits:
    cpu: 2
    memory: 2048Mi
fasitResources:
  exposed:
  - alias: ident-pool.rest-api
    resourceType: restservice
    path: /api
  used:
  - alias: "ident-poolDB"
    resourceType: datasource
    propertyMap:
      url: spring.datasource.url
      username: spring.datasource.username
      password: spring.datasource.password
  - alias: nav-sts-oidc
    resourceType: OpenIdConnect
    propertyMap:
      issuerUrl: freg.security.oidc.idp.navSts.issuerUrl
      jwksUrl: freg.security.oidc.idp.navSts.jwksUrl
