name: ident-pool
image: "docker.adeo.no:5000/registre/ident-pool"
replicas:
  min: 1
  max: 1
  cpuThresholdPercentage: 80
port: 8080
healthcheck:
  liveness:
    path: /internal/isAlive
    initialDelay: 30
    periodSeconds: 2
    failureThreshold: 140
  readiness:
    path: /internal/isReady
    initialDelay: 30
    periodSeconds: 2
    failureThreshold: 140
leaderElection: true
prometheus:
  enabled: false
resources:
  requests:
    cpu: 250m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi
fasitResources:
  used:
  - alias: "ident-poolDB"
    resourceType: datasource
    propertyMap:
      url: spring.datasource.url
      username: spring.datasource.username
      password: spring.datasource.password

# TODO: oppdater fasit-utils slik at OIDC-infoen kan hentes ut p√• denne formen fra fasit.
#   - alias: nav-sts-oidc
#      resourceType: OpenIdConnect
#      propertyMap:
#        agentName: freg.security.oidc.idp.navSts.clientId   <-- dummy
#        password: freg.security.oidc.idp.navSts.clientSecret <-- dummy
#        issuerUrl: freg.security.oidc.idp.navSts.issuerUrl
#

  - alias: "security-token-service-jwks"
    resourceType: restservice
    propertyMap:
          url: "security-token-service-jwks"

  - alias: "security-token-service-issuer"
    resourceType: baseurl
    propertyMap:
              url: "security-token-service-issuer"
